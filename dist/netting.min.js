!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Netting=t()}(this,(function(){"use strict";var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},e(t,o)};var t=function(){function e(){}return e.prototype.getWindowDimensions=function(){return{innerHeight:null===window||void 0===window?void 0:window.innerHeight,innerWidth:null===window||void 0===window?void 0:window.innerWidth,outerHeight:null===window||void 0===window?void 0:window.outerHeight,outerWidth:null===window||void 0===window?void 0:window.outerWidth}},e.prototype.getScrollPosition=function(){return(null===window||void 0===window?void 0:window.scrollY)||(null===window||void 0===window?void 0:window.pageYOffset)},e}(),o=null===document||void 0===document?void 0:document.querySelector("html");function i(){return null===navigator||void 0===navigator?void 0:navigator.platform}function n(){return null===navigator||void 0===navigator?void 0:navigator.userAgent}function r(){var e=n();return-1!==(null==e?void 0:e.indexOf("Chrome"))?"Google Chrome":-1!==(null==e?void 0:e.indexOf("Safari"))?"Safari":-1!==(null==e?void 0:e.indexOf("Firefox"))?"Mozilla Firefox":-1!==(null==e?void 0:e.indexOf("Edge"))?"Microsoft Edge":-1!==(null==e?void 0:e.indexOf("Opera"))||-1!==(null==e?void 0:e.indexOf("OPR"))?"Opera":-1!==(null==e?void 0:e.indexOf("Trident"))?"Microsoft Internet Explorer":"unknown"}return{ExitIntent:function(t){function s(e){var n=t.call(this)||this;return n.Timer=null,n.Interval=null,n.TimeSec=0,n.MaxTime=0|e.MaxTime,n.ActivityState={mouse:{x:0,y:0},scrollPosition:0,isInteracted:!1,session:0,window:{innerHeight:0,innerWidth:0,outerHeight:0,outerWidth:0},os:i(),browserName:r()},console.log("yes exitintent class loaded"),null==o||o.addEventListener("mouseenter",n.mouseEnter.bind(n)),null==o||o.addEventListener("mouseleave",n.mouseLeave.bind(n)),n.startMouseMoveTracker(),n}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}(s,t),s.prototype.startMouseMoveTracker=function(){var e=this;null==o||o.addEventListener("mousemove",this.MouseMoveTracker.bind(this)),this.Timer=setTimeout(this.stopMouseMoveTracker.bind(this),1e3*this.MaxTime),this.Interval=setInterval((function(){e.TimeSec++,console.log("time: ",e.TimeSec)}),980)},s.prototype.stopMouseMoveTracker=function(){console.log("stoping"),document.removeEventListener("mousemove",this.MouseMoveTracker),clearTimeout(this.Timer),clearTimeout(this.Interval),this.TimeSec==this.MaxTime&&(this.TimeSec=0,console.log(this.ActivityState)),console.log("Mouse move event stopped")},s.prototype.MouseMoveTracker=function(e){var t={x:e.clientX,y:e.clientY},i=this.getScrollPosition();this.ActivityState.mouse=t,this.ActivityState.scrollPosition=i,null==o||o.addEventListener("mousedown",this.updateActivityStateIsInterect.bind(this)),this.ActivityState.window=this.getWindowDimensions(),console.log("mouse move tracker")},s.prototype.updateActivityStateIsInterect=function(){this.ActivityState.isInteracted=!0},s.prototype.mouseEnter=function(){console.log("Scroll position",this.getScrollPosition()),console.log("OS:",i()),console.log("User agent:",n()),console.log("Browser name:",r())},s.prototype.mouseLeave=function(){console.log("Mouse left"),this.ActivityState.session=this.TimeSec},s}(t)}}));
